<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Resume AutoFill</title>
  <link rel="stylesheet" href="popup.css">
</head>
<body>
  <div id="app">
    <!-- Loading状态 -->
    <div id="loading-screen" class="loading-screen hidden">
      <div class="loading-spinner"></div>
      <p>加载中...</p>
    </div>

    <!-- 未登录状态 - 登录/注册页面 -->
    <div id="auth-container" class="auth-container hidden">
      <div class="header">
        <div class="logo">
          <span class="logo-icon">🤖</span>
          <span class="logo-text">AI简历填写</span>
        </div>
      </div>

      <!-- 登录表单 -->
      <div id="login-form" class="auth-form">
        <h2>登录账户</h2>
        <form id="login-form-element">
          <div class="form-group">
            <label for="email">邮箱地址</label>
            <input
              type="email"
              id="email"
              name="email"
              placeholder="请输入邮箱地址"
              required
            >
          </div>
          <div class="form-group">
            <label for="password">密码</label>
            <input
              type="password"
              id="password"
              name="password"
              placeholder="请输入密码"
              required
            >
          </div>
          <button type="submit" id="login-btn" class="btn-primary">
            <span id="login-btn-text">登录</span>
          </button>
        </form>
        <div class="auth-footer">
          <p>没有账户？<a href="#" id="show-register">立即注册</a></p>
        </div>
      </div>

      <!-- 注册表单 -->
      <div id="register-form" class="auth-form hidden">
        <h2>创建账户</h2>
        <form id="register-form-element">
          <div class="form-group">
            <label for="reg-email">邮箱地址</label>
            <input
              type="email"
              id="reg-email"
              name="email"
              placeholder="请输入邮箱地址"
              required
            >
          </div>
          <div class="form-group">
            <label for="reg-password">密码</label>
            <input
              type="password"
              id="reg-password"
              name="password"
              placeholder="请输入密码（至少6位）"
              minlength="6"
              required
            >
          </div>
          <div class="form-group">
            <label for="confirm-password">确认密码</label>
            <input
              type="password"
              id="confirm-password"
              name="confirmPassword"
              placeholder="请再次输入密码"
              required
            >
          </div>
          <button type="submit" id="register-btn" class="btn-primary">
            <span id="register-btn-text">注册</span>
          </button>
        </form>
        <div class="auth-footer">
          <p>已有账户？<a href="#" id="show-login">立即登录</a></p>
        </div>
      </div>
    </div>

    <!-- 已登录状态 - 主功能页面 -->
    <div id="main-container" class="main-container hidden">
      <div class="header">
        <div class="logo">
          <span class="logo-icon">🤖</span>
          <span class="logo-text">AI简历填写</span>
        </div>
        <button class="btn-logout" id="logout-btn">退出</button>
      </div>

      <!-- 标签页导航 -->
      <div class="tabs">
        <button class="tab-btn active" id="tab-dashboard" data-tab="dashboard">
          概览
        </button>
        <button class="tab-btn" id="tab-resume" data-tab="resume">
          简历管理
        </button>
        <button class="tab-btn" id="tab-activation" data-tab="activation">
          激活码
        </button>
      </div>

      <!-- 概览页面 -->
      <div id="dashboard-content" class="tab-content">
        <div class="welcome-section">
          <h3>欢迎使用 AI简历填写</h3>
          <p>智能识别表单字段，一键填写简历信息</p>
        </div>

        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon">⚡</div>
            <div class="stat-info">
              <div class="stat-label">剩余次数</div>
              <div class="stat-value" id="remaining-uses">0</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon">📝</div>
            <div class="stat-info">
              <div class="stat-label">激活次数</div>
              <div class="stat-value" id="total-activations">0</div>
            </div>
          </div>
        </div>

        <div class="quick-actions">
          <button class="action-btn" id="quick-resume">
            <span class="action-icon">📋</span>
            <span>编辑简历</span>
          </button>
          <button class="action-btn" id="quick-activation">
            <span class="action-icon">🔑</span>
            <span>添加激活码</span>
          </button>
        </div>
      </div>

      <!-- 简历管理页面 -->
      <div id="resume-content" class="tab-content hidden">
        <div class="section-header">
          <h3>简历信息管理</h3>
          <p>请填写您的简历信息，用于自动匹配表单字段</p>
        </div>

        <!-- 简历模板说明 -->
        <div class="template-section">
          <div class="template-info">
            <h4>📝 简历信息填写</h4>
            <p class="template-hint">
              <span class="info-icon">💡</span>
              所有字段均为<strong>选填</strong>，填写的信息越完整，AI填写表单时越准确。
              如果某些字段完全没有填写而招聘网站要求，插件无法杜撰相关信息。
            </p>
          </div>
          <div class="template-actions">
            <button type="button" id="add-field-btn" class="btn-secondary">+ 添加自定义字段</button>
          </div>
        </div>

        <form id="resume-form" class="resume-form">
          <!-- 动态生成的表单内容将插入这里 -->

          <div class="form-actions">
            <button type="submit" id="save-resume-btn" class="btn-primary">
              <span id="save-resume-text">保存简历信息</span>
            </button>
            <button type="button" id="reset-resume-btn" class="btn-secondary">重置</button>
          </div>
        </form>
      </div>

        <!-- 添加字段弹窗 -->
        <div id="add-field-modal" class="modal hidden">
          <div class="modal-content">
            <div class="modal-header">
              <h4>添加自定义字段</h4>
              <button type="button" class="modal-close">&times;</button>
            </div>
            <form id="add-field-form" class="modal-body">
              <div class="form-group">
                <label>字段名称 (Key)</label>
                <input type="text" id="field-key" placeholder="如：github_url" required>
                <small>建议使用英文和下划线，如：github_url, project_link</small>
              </div>
              <div class="form-group">
                <label>显示标签 (Label)</label>
                <input type="text" id="field-label" placeholder="如：GitHub地址" required>
                <small>用户看到的字段名称</small>
              </div>
            </form>
            <div class="modal-footer">
              <button type="button" class="btn-secondary" id="cancel-field-btn">取消</button>
              <button type="submit" form="add-field-form" class="btn-primary">添加字段</button>
            </div>
          </div>
        </div>

      <!-- 激活码管理页面 -->
      <div id="activation-content" class="tab-content hidden">
        <div class="section-header">
          <h3>激活码管理</h3>
          <p>输入激活码来获取更多使用次数</p>
        </div>

        <div class="activation-form">
          <div class="form-group">
            <label>激活码</label>
            <div class="input-group">
              <input
                type="text"
                id="activation-code"
                placeholder="请输入激活码"
                maxlength="32"
              >
              <button
                type="button"
                id="activate-btn"
                class="btn-activate"
                disabled
              >
                <span id="activate-btn-text">激活</span>
              </button>
            </div>
          </div>
        </div>

        <div class="usage-summary">
          <h4>使用情况</h4>
          <div class="usage-item">
            <span class="usage-label">激活次数：</span>
            <span class="usage-value" id="total-activations-detail">0</span>
          </div>
          <div class="usage-item">
            <span class="usage-label">剩余次数：</span>
            <span class="usage-value highlight" id="remaining-uses-detail">0</span>
          </div>
        </div>
      </div>
    </div>

    <!-- 消息提示 -->
    <div id="message" class="message hidden">
      <span id="message-text"></span>
    </div>
  </div>

  <script src="resumeTemplateManager.js"></script>
  <script src="popup.js"></script>
</body>
</html>
